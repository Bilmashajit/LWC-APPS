<template>
  <lightning-card title="Todo list" style="width: 100%">
    <lightning-button-icon
      slot="actions"
      icon-name="utility:sync"
      alternative-text="Sync"
      title="Sync"
      onclick={handleRefresh}
    ></lightning-button-icon>

    <lightning-layout>
      <lightning-layout-item padding="around-small" size="12">
        <template if:true={processing}>
          <lightning-spinner
            alternative-text="Loading"
            size="small"
          ></lightning-spinner>
        </template>

        <ul class="slds-has-dividers_around-space">
          <template if:true={todoTasks}>
            <template for:each={todoTasks} for:item="todoTask">
              <li key={todoTask.id} class="slds-item">
                <lightning-layout
                  vertical-align="center"
                  horizontal-align="spread"
                >
                  <lightning-layout-item padding="horizontal-small" size="8">
                    {todoTask.name}
                  </lightning-layout-item>
                  <lightning-layout-item padding="horizontal-small" size="4">
                    <div class="slds-float_right">
                      <lightning-button-icon
                        icon-name="utility:delete"
                        alternative-text="delete"
                        title="Delete"
                        data-task={todoTask.id}
                        onclick={handleDelete}
                      ></lightning-button-icon>
                    </div>
                  </lightning-layout-item>
                </lightning-layout>
              </li>
            </template>
          </template>

          <template if:false={todoTasks}>
            <span>There is no item to display</span>
          </template>
        </ul>
      </lightning-layout-item>
    </lightning-layout>

    <p slot="footer">
      <lightning-layout pull-to-boundary="small">
        <lightning-layout-item padding="horizontal-small" flexibility="grow">
          <lightning-input
            type="text"
            label="Enter new task"
            variant="label-hidden"
            placeholder="Enter new task"
            value={newTask}
            onchange={updateNewTask}
            autocomplete="off"
            required
          ></lightning-input>
        </lightning-layout-item>

        <lightning-layout-item padding="horizontal-small">
          <lightning-button
            label="Add"
            variant="brand"
            onclick={handlerAdd}
          ></lightning-button>
        </lightning-layout-item>
      </lightning-layout>
    </p>
  </lightning-card>
</template>
